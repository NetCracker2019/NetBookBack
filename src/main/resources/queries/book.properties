
getFavouriteBooksByUserId = \
  SELECT title, likes, image_path, authors  \
  FROM view_book_list INNER JOIN user_book \
  ON user_book.book_id = view_book_list.book_id \
  WHERE user_id = :user_id and favourite = true \
  order by title \
  offset (:offset * :cnt) rows \
  fetch first :cnt row only;

getReadingBooksByUserId = \
  SELECT title, likes, image_path, authors  \
  FROM view_book_list INNER JOIN user_book \
  ON user_book.book_id = view_book_list.book_id \
  WHERE user_id = :user_id and reading = true \
  order by title \
  offset (:offset * :cnt) rows \
  fetch first :cnt row only;

getReadBooksByUserId = \
  SELECT title, likes, image_path, authors  \
  FROM view_book_list INNER JOIN user_book \
  ON user_book.book_id = view_book_list.book_id \
  WHERE user_id = :user_id and reading = false \
  order by title \
  offset (:offset * :cnt) rows \
  fetch first :cnt row only;

getAllBooks = SELECT * FROM view_book_list

findBooksByTitleOrAuthor = select * from view_book_list \
  WHERE lower(title) like :titleOrAuthor \
  or EXISTS (SELECT FROM  unnest(authors) \
  author WHERE  lower(author) LIKE :titleOrAuthor);

getBookById = select * from view_book_list where book_id = :id;

getReviewsByBookId = select r.review_id r_id, \
    r.user_id u_id, r.book_id b_id, p.person_name u_name, p.avatar_filepath av_path, \
    r.review_text r_text, r.rating rating, r.approved appr from review r \
    inner join person p on r.user_id = p.person_id \
    where r.book_id = :bookId;

#getUnApprove = SELECT b.title, b.image_path imagePath, b.release_date releaseDate, b.description, b.authors, b.genres \
#  FROM view_book_list b \
#  INNER JOIN announcement a \
#  ON b.book_id = a.announcement_book_id \
#  WHERE a.approved = false;

#getUnApprove = SELECT a.announcment_id announcmentId, a.title, a.image_path imagePath, v.release_date releaseDate, a.description, v.authors, v.genres \
#  FROM announcement a \
#  INNER JOIN view_announcement_list v \
#  ON a.announcement_book_id = v.book_id \
#  WHERE a.approved = false;

getUnApprove = SELECT announcment_id announcmentId, title, image_path imagePath, release_date releaseDate, description, authors, genres \
FROM view_announcement_list

updateAnnouncement = UPDATE announcement \
SET approved = true \
WHERE announcment_id = :announcementId;